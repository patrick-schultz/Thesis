% -*- root: thesis.tex -*-

\chapter{A universal property for the pushout product}\label{Ch:PushoutProduct} 

Define a cyclic double multicategory $\mathbb{J}$ as follows. The objects are $A_i$, $B_i$, for $i\in\{0,1,2\}$, and their duals. The horizontal 1-cells are $d^i_0,d^i_1\colon B_i\to A_i$. The vertical 1-cells are $F_i\colon (A_{i-1},A_{i+1})\to A^{\bullet}_i$ and $G_i\colon (B_{i-1},B_{i+1})\to B^{\bullet}_i$, which form two orbits under the cyclic action.

There are two types of 2-cells. There are
\[\begin{tikzcd}
	B_i \rar[][domA]{d^i_1} \dar[swap]{\id}
		& A_i \dar{\id} \\
	B_i \rar[][codA,swap]{d^i_0}
		& A_i 
	\twocellA{\alpha_i}
\end{tikzcd}\]
for each $i$. We will often draw these 2-cells globularly.

There are also 2-cells
\[\begin{tikzcd}[column sep=large]
	B_{i+1},B_{i-1} \rar[][domA]{d^{i+1}_{k_{i+1}},d^{i-1}_{k_{i-1}}} 
			\dar[swap]{G_i} 
		& A_{i+1},A_{i-1} \dar{F_i} \\
	B^{\bullet}_i \rar[][codA,swap]{d^{i\bullet}_{k_i}} 
		& A^{\bullet}_i
	\twocellA{\lambda^i_{k_{i+1},k_{i-1},k_{i}}}
\end{tikzcd}\]
for all choices of $(k_0,k_1,k_2)\in\{0,1\}^3$ except $(0,0,0)$.

Notice that there is at most one element of every hom-set, so all compositions and cyclic actions are uniquely defined. From now on, we will omit indices whenever doing so is unambiguous.

\begin{remark}
The cyclic double multicategory $\mathbb{J}$ is generated under composition by the $\alpha_i$ and the $\lambda^i_{k_{i+1},k_{i-1},k_{i}}$ with exactly one of $k_0,k_1,k_2$ equal to 1. These nine $\lambda$ generators are further generated under the cyclic action by only three, though there are many choices of which three. These generators satisfy the relations

\begin{equation}
\begin{tikzcd}[bend angle=50]
	B_1,B_2 \rar[][domA]{d_1,d_0} 
			\dar[swap]{G_0}
		& A_1,A_2 \dar{F_0} \\
	B^{\bullet}_0 \rar[][codA,domB]{d^{\bullet}_0}
			\rar[bend right][codB,swap]{d^{\bullet}_1}
		& A^{\bullet}_0
	\twocellA{\lambda}
	\twocellB{\alpha^{\bullet}}
\end{tikzcd}
=
\begin{tikzcd}[bend angle=50]
	B_1,B_2 \ar[bend left]{r}[domA]{}{d_1,d_0}
			\rar[][codA,domB,swap]{d_0,d_0} 
			\dar[swap]{G_0} 
		& A_1,A_2 \dar{F_0} \\
	B^{\bullet}_0 \rar[][codB,swap]{d^{\bullet}_1} 
		& A^{\bullet}_0
	\twocellA{\alpha,\id}
	\twocellB{\lambda}
\end{tikzcd}
\end{equation}

\begin{equation}
\begin{tikzcd}[bend angle=50]
	B_1,B_2 \rar[][domA]{d_0,d_1} 
			\dar[swap]{G_0} 
		& A_1,A_2 \dar{F_0} \\
	B^{\bullet}_0 \rar[][codA,domB]{d^{\bullet}_0}	
			\rar[bend right][codB,swap]{d^{\bullet}_1}
		& A^{\bullet}_0
	\twocellA{\lambda}
	\twocellB{\alpha^{\bullet}}
\end{tikzcd}
=
\begin{tikzcd}[bend angle=50]
	B_1,B_2 \rar[bend left][domA]{d_0,d_1} 
			\rar[][codA,domB,swap]{d_0,d_0} 
			\dar[swap]{G_0} 
		& A_1,A_2 \dar{F_0} \\
	B^{\bullet}_0 \rar[][codB,swap]{d^{\bullet}_1} 
		& A^{\bullet}_0
	\twocellA{\id,\alpha}
	\twocellB{\lambda}
\end{tikzcd}
\end{equation}

\begin{equation}
\begin{tikzcd}[bend angle=50]
	B_1,B_2 \rar[bend left][domA]{d_1,d_1} 
			\rar[][codA,domB,swap]{d_1,d_0} 
			\dar[swap]{G_0} 
		& A_1,A_2 \dar{F_0} \\
	B^{\bullet}_0 \rar[][codB,swap]{d^{\bullet}_0} 
		& A^{\bullet}_0
	\twocellA{\id,\alpha}
	\twocellB{\lambda}
\end{tikzcd}
=
\begin{tikzcd}[bend angle=50]
	B_1,B_2 \rar[bend left][domA]{d_1,d_1} 
			\rar[][codA,domB,swap]{d_0,d_1} 
			\dar[swap]{G_0} 
		& A_1,A_2 \dar{F_0} \\
	B^{\bullet}_0 \rar[][codB,swap]{d^{\bullet}_0} 
		& A^{\bullet}_0
	\twocellA{\alpha,\id}
	\twocellB{\lambda}
\end{tikzcd}
\end{equation}
and their reflections under the cyclic action.
\end{remark}

\begin{example}\label{Ex:PullbackProduct}
Let $\mathbb{M}\mathbf{Adj}$ be the double cyclic multicategory of categories, functors, and multivariable right adjunctions. Any multivariable right adjunction $F_0\colon \cat{A}_1\times \cat{A}_2\to \cat{A}_0$ extends to a functor $\widehat{\mathbb{F}}\colon\mathbb{J}\to\mathbb{M}\mathbf{Adj}$ as follows.
\begin{itemize}
	\item $B_i$ is sent to $\cat{A}_i^{\btwo}$, the arrow category of $\cat{A}_i$.
	\item The $d_1$ are sent to the domain functors $\dom\colon\cat{A}_i^{\btwo}\to\cat{A}_i$ and the $d_0$ are sent to the codomain functors $\cod\colon\cat{A}_i^{\btwo}\to\cat{A}_i$.
	\item The $\alpha$ are sent to the canonical natural transformations $\dom\Rightarrow\cod$.
	\item The $G_i$ are sent to functors $\hat{F}_i$. Given morphisms $f\colon A\to B\in\cat{A}_1$ and $g\colon X\to Y\in\cat{A}_2$, $\hat{F}_0(f,g)$ is defined as in the diagram
	\begin{equation}\label{E:PullbackProduct}
	\begin{tikzcd}[bend angle=15]
		F_0(B,Y) \arrow[bend left]{rrd}{F_0(1,g)}
			\arrow[bend right]{rdd}[swap]{F_0(f,1)}
			\arrow[dashed]{dr}{\hat{F}_0(f,g)}
		&[-4ex]& \\
		& F_0(A,Y)\!\!\underset{F_0(A,X)}{\prod}\!\!F_0(B,X)
			\rar{p_2}
			\dar[swap]{p_1}
		& F_0(B,X) \dar{F_0(f,1)} \\
		& F_0(A,Y) \rar[swap]{F_0(1,g)} & F_0(A,X)
	\end{tikzcd}
	\end{equation}
	It is a standard fact that the $\hat{F}_i$ form a two-variable adjunction between the arrow categories. 
	\item Looking at diagram \ref{E:PullbackProduct}, 
	\begin{align*}
		(\lambda^0_{1,0,0})_{f,g}&=p_1\colon \cod\hat{F}_0(f,g)\to F_0(\dom f,\cod g)\\
		(\lambda^0_{0,1,0})_{f,g}&=p_2\colon \cod\hat{F}_0(f,g)\to F_0(\cod f,\dom g)\\
		(\lambda^0_{0,0,1})_{f,g}&=\id\colon \dom\hat{F}_0(f,g)\to F_0(\cod f,\cod g).
	\end{align*}
	The three relations (1)-(3) then correspond precisely to the commutativity of the three regions in diagram \eqref{E:PullbackProduct}.
\end{itemize}
\end{example}

\begin{exercise}
Check that the mates of the morphism $p_1$ in diagram \ref{E:PullbackProduct} are $p_2$ and $\id$ in the two similar diagrams defining $\hat{F}_1$ and $\hat{F}_2$.
\end{exercise}

Let $\mathbb{I}$ be the sub-category of $\mathbb{J}$ consisting of just the 1-cells $F_i$. Let $\mathbf{CDMCat}$ denote the 2-category of cyclic double multicategories, functors, and horizontal transformations.

\begin{theorem}
Fix a functor $\mathbb{F}\colon\mathbb{I}\to\mathbb{M}\mathbf{Adj}$. Then the functor $\hat{\mathbb{F}}\colon\mathbb{J}\to\mathbb{M}\mathbf{Adj}$ constructed in example \ref{Ex:PullbackProduct} is terminal in the category $\mathbf{CDMCat}_{\mathbb{F}}(\mathbb{J},\mathbb{M}\mathbf{Adj})$ of functors on $\mathbb{J}$ restricting to $\mathbb{F}$ on $\mathbb{I}$.
\end{theorem}
\begin{proof}
Concretely, the theorem says that given the data of a functor $\mathbb{J}\to\mathbb{M}\mathbf{Adj}$, there is a unique 2-cell
\[
\begin{tikzcd}
	\cat{B}_1,\cat{B}_2 \rar[][domA]{H_1,H_2} 
			\dar[swap]{G_0} 
		& \cat{A}^{\mathbf{2}}_1,\cat{A}^{\mathbf{2}}_2 \dar{\hat{F}_0} \\
	\cat{B}^{\bullet}_0 \rar[][codA,swap]{H^{\bullet}_3}	
		& \cat{A}^{\bullet\mathbf{2}}_0
	\twocellA{\theta}
\end{tikzcd}
\]
such that

\begin{equation}\label{Eq:UProp1}
\begin{tikzcd}
	\cat{B}_1,\cat{B}_2 \rar[][domA]{H_1,H_2} 
			\dar[swap]{G_0} 
		& \cat{A}^{\mathbf{2}}_1,\cat{A}^{\mathbf{2}}_2
			\rar[][domB]{\cod,\cod}
			\dar{\hat{F}_0}
		& \cat{A}_1,\cat{A}_2 \dar{F_0}\\
	\cat{B}^{\bullet}_0 \rar[][codA,swap]{H^{\bullet}_3}	
		& \cat{A}^{\bullet\mathbf{2}}_0 \rar[][codB,swap]{\dom^{\bullet}}
		& \cat{A}^{\bullet}_0
	\twocellA{\theta}
	\twocellB{\id}
\end{tikzcd}
=
\begin{tikzcd}
	\cat{B}_1,\cat{B}_2
			\rar[][domA]{d_0,d_0} 
			\dar[swap]{G_0} 
		& \cat{A}_1,\cat{A}_2 \dar{F_0} \\
	\cat{B}^{\bullet}_0 \rar[][codA,swap]{d^{\bullet}_1} 
		& \cat{A}^{\bullet}_0
	\twocellA{\lambda}
\end{tikzcd}
\end{equation}
%
\begin{equation}\label{Eq:UProp2}
\begin{tikzcd}
	\cat{B}_1,\cat{B}_2 \rar[][domA]{H_1,H_2} 
			\dar[swap]{G_0} 
		& \cat{A}^{\mathbf{2}}_1,\cat{A}^{\mathbf{2}}_2
			\rar[][domB]{\dom,\cod}
			\dar{\hat{F}_0}
		& \cat{A}_1,\cat{A}_2 \dar{F_0}\\
	\cat{B}^{\bullet}_0 \rar[][codA,swap]{H^{\bullet}_3}	
		& \cat{A}^{\bullet\mathbf{2}}_0 \rar[][codB,swap]{\cod^{\bullet}}
		& \cat{A}^{\bullet}_0
	\twocellA{\theta}
	\twocellB{p_1}
\end{tikzcd}
=
\begin{tikzcd}
	\cat{B}_1,\cat{B}_2
			\rar[][domA]{d_1,d_0} 
			\dar[swap]{G_0} 
		& \cat{A}_1,\cat{A}_2 \dar{F_0} \\
	\cat{B}^{\bullet}_0 \rar[][codA,swap]{d^{\bullet}_0} 
		& \cat{A}^{\bullet}_0
	\twocellA{\lambda}
\end{tikzcd}
\end{equation}
%
\begin{equation}\label{Eq:UProp3}
\begin{tikzcd}
	\cat{B}_1,\cat{B}_2 \rar[][domA]{H_1,H_2} 
			\dar[swap]{G_0} 
		& \cat{A}^{\mathbf{2}}_1,\cat{A}^{\mathbf{2}}_2
			\rar[][domB]{\cod,\dom}
			\dar{\hat{F}_0}
		& \cat{A}_1,\cat{A}_2 \dar{F_0}\\
	\cat{B}^{\bullet}_0 \rar[][codA,swap]{H^{\bullet}_3}	
		& \cat{A}^{\bullet\mathbf{2}}_0 \rar[][codB,swap]{\cod^{\bullet}}
		& \cat{A}^{\bullet}_0
	\twocellA{\theta}
	\twocellB{p_2}
\end{tikzcd}
=
\begin{tikzcd}
	\cat{B}_1,\cat{B}_2
			\rar[][domA]{d_0,d_1} 
			\dar[swap]{G_0} 
		& \cat{A}_1,\cat{A}_2 \dar{F_0} \\
	\cat{B}^{\bullet}_0 \rar[][codA,swap]{d^{\bullet}_0} 
		& \cat{A}^{\bullet}_0
	\twocellA{\lambda}
\end{tikzcd}
\end{equation}

Fix objects $B_1\in\cat{B}_1$, $B_2\in\cat{B}_2$. The $H_i$ are the functors sending $B_i$ to $H_i(B_i)=\alpha_{B_i}\colon d_1B_i\to d_0B_i$. The component of $\theta$ at $(B_1,B_2)$ is a square
\[
\begin{tikzcd}
d_1G_0(B_1,B_2) \rar \dar
& F_0(d_0B_1,d_0B_2) \dar \\
d_0G_0(B_1,B_2) \rar
& F_0(d_1B_1,d_0B_2) \!\!\! \underset{F_0(d_1B_1,d_1B_2)}{\prod} \!\!\! F_0(d_0B_1,d_1B_2)
\end{tikzcd}
\]
The top arrow is uniquely determined by equation \eqref{Eq:UProp1}, while the components of the bottom arrow are uniquely determined by equations \eqref{Eq:UProp2} and \eqref{Eq:UProp3}.
\end{proof}